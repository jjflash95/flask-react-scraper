(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{165:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),l=a.n(c),i=(a(90),a(15)),o=a(61),s=a(183),u=a(77),m=a(174),f=a(24),d=a(175),g=a(191),h=function(e){switch(e.toLowerCase()){case"mercadolibre":return"yellow";case"olx":return"blue";default:return"neutral"}};function p(e){var t,a=e.result,c=e.selectedItems,l=e.setSelectedItems,s=Object(n.useState)(1),p=Object(i.a)(s,2),E=p[0],y=p[1],b=Object(n.useState)(!1),x=Object(i.a)(b,2),j=x[0],v=x[1];return r.a.createElement(m.a,{key:a.title,backgroundColor:"white",float:"left",width:350,height:350,margin:14,display:"flex",alignItems:"center",justifyContent:"center",elevation:E,onMouseOver:function(){y(3)},onMouseLeave:function(){y(1)},cursor:"pointer"},r.a.createElement(o.a,{style:{width:"330px",display:"flex",boxSizing:"border-box",flexDirection:"column",padding:"10px"}},r.a.createElement("div",{style:{justifyContent:"center",maxWidth:"330px",maxHeight:"200px"}},r.a.createElement("img",{style:{maxWidth:"310px",maxHeight:"200px",display:"block",marginLeft:"auto",marginRight:"auto"},src:a.image_url})),r.a.createElement("div",{style:{alignItems:"center",marginBottom:"5px",minHeight:"50px"}},r.a.createElement(f.a,{color:"default"},a.title)),r.a.createElement("div",null,r.a.createElement(o.a,null,r.a.createElement(f.a,{color:"secondary",fontWeight:500,fontSize:20},a.currency," ",a.price)),r.a.createElement(o.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement(d.a,{label:"Track prices",checked:j,onChange:(t=a,function(){var e=Object(u.a)(c);if(j){var a=e.indexOf(t);if(a<0)return;e.splice(a,1)}else e.push(t);l(e),v(!j)})}),r.a.createElement(o.a,{style:{justifyContent:"center",marginTop:"12px"}},r.a.createElement(g.a,{color:h(a.source)},a.source))))))}function E(e){var t=e.dummyItem;return r.a.createElement(m.a,{key:t,elevation:1,backgroundColor:"white",float:"left",width:350,height:350,margin:14,display:"flex",alignItems:"center",justifyContent:"center"},r.a.createElement(o.a,{background:"tint2",style:{width:"330px",display:"flex",boxSizing:"border-box",flexDirection:"column",padding:"10px"}},r.a.createElement(o.a,{style:{alignItems:"center",padding:"10px",width:"330px",height:"200px"}}),r.a.createElement("div",{style:{alignItems:"center",marginBottom:"5px",minHeight:"50px"}},r.a.createElement(f.a,{color:"default"})),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:"5px",bottom:"0"}},r.a.createElement(f.a,{color:"secondary"}),r.a.createElement(g.a,{color:"neutral",style:{alignSelf:"flex-end"}}))))}function y(e){var t,a=e.results,n=e.selectedItems,c=e.setSelectedItems;return a?r.a.createElement(o.a,{clearfix:!0},(t=a,t.sort((function(e,t){return e.price-t.price}))).map((function(e){return r.a.createElement(p,{result:e,selectedItems:n,setSelectedItems:c})}))):r.a.createElement(o.a,{clearfix:!0},Array.from(Array(50).keys()).map((function(e){return r.a.createElement(E,{dummy:e})})))}var b=a(185),x=a(189),j=a(186),v=a(78),w=a(187),S=a(177),O=a(181),k=a(41),C=a(182),I=a(47),z=function(){var e=(new I.a).get("session_token");return console.log(e),fetch("/api/me?session_token=".concat(e))};function D(e){var t=e.search,a=e.selectedItems,c=Object(n.useState)(null),l=Object(i.a)(c,2),s=l[0],u=l[1],m=Object(n.useState)("ARS"),d=Object(i.a)(m,2),g=d[0],h=d[1],p=Object(n.useState)(!0),E=Object(i.a)(p,2),y=E[0],D=E[1],T=Object(n.useState)(!1),B=Object(i.a)(T,2),W=B[0],R=B[1],L=Object(n.useState)(""),A=Object(i.a)(L,2),P=A[0],H=A[1],M=Object(n.useState)(""),N=Object(i.a)(M,2),J=N[0],U=N[1],_=function(e){u(e.target.value),D(!1)},q=function(e){return h(e.target.value)},K=function(){z().then((function(e){return e.json()})).then((function(e){if(e){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,trackingPrice:s,trackingCurrency:g,selectedItems:a})};fetch("/api/save",n).then((function(e){return e.json()})).then((function(e){e.saved?b.a.success("Your items are now being tracked",{duration:5}):b.a.danger("Something went wrong trying to create your audience",{duration:5})}))}else R(!0)}))};return r.a.createElement(o.a,null,r.a.createElement(x.a,{isShown:W,onCloseComplete:function(){return R(!1)}},r.a.createElement(o.a,{style:{display:"flex",flexDirection:"column",justifyContent:"center",marginRight:"auto",marginLeft:"auto",width:"350px",height:"350px"}},r.a.createElement(j.a,{label:"Username",type:"text",onChange:function(e){return H(e.target.value)}}),r.a.createElement(j.a,{label:"Password",type:"password",onChange:function(e){return U(e.target.value)}}),r.a.createElement(o.a,{style:{marginRight:"auto",marginLeft:"auto"}},r.a.createElement(v.a,{height:40,onClick:function(){var e={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:P,password:J})};fetch("/login",e).then((function(e){return e.json()})).then((function(e){var t;t=e.token,(new I.a).set("session_token",t,{path:"/"}),R(!1)}))}},"Login")))),r.a.createElement(o.a,{style:{marginRight:"15px"}},r.a.createElement(w.a,{shouldCloseOnExternalClick:!1,content:function(e){var t=e.close;return r.a.createElement(o.a,{width:520,height:140,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},r.a.createElement(o.a,null,r.a.createElement(S.a,null,"Tracking Prices for  ",r.a.createElement(O.a,{size:500,marginLeft:"5px",marginRight:"5px"},a.length),"  items"),r.a.createElement(o.a,null,r.a.createElement(f.a,{fontSize:16},"Notify me when any item goes below "),r.a.createElement(k.a,{width:120,onChange:_}),r.a.createElement(C.a,{onChange:q},r.a.createElement("option",{value:"ARS",selected:!0},"ARS"),r.a.createElement("option",{value:"USD"},"USD"))),r.a.createElement(o.a,{margin:"5px",style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginTop:"10px"}},r.a.createElement(v.a,{intent:"success",justifyContent:"center",appearance:"primary",height:40,width:140,disabled:y,onClick:K},"Save"),r.a.createElement(v.a,{height:40,width:140,onClick:t},"Close"))))}},r.a.createElement(v.a,{height:40,iconBefore:"edit"},"Track settings"))))}function T(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),u=Object(i.a)(l,2),m=u[0],f=u[1],d=Object(n.useState)(!0),g=Object(i.a)(d,2),h=g[0],p=g[1],E=Object(n.useState)([]),b=Object(i.a)(E,2),x=b[0],j=b[1],v=function(e){p(!1),f(null),fetch("/?q="+e).then((function(e){return e.json()})).then(f)};return r.a.createElement("div",null,r.a.createElement(o.a,{display:"flex",padding:16,background:"tint2",borderRadius:3,style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}},r.a.createElement(s.a,{placeholder:"Search",height:40,onChange:function(e){c(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&v(a)}}),x&&!!x.length&&r.a.createElement(D,{search:a,selectedItems:x})),!h&&r.a.createElement(y,{results:m,selectedItems:x,setSelectedItems:j}))}var B=a(58),W=function(e){return e.sort((function(e,t){return e.price-t.price}))[0]};function R(e){var t=e.tracking,a=Object(n.useState)(1),c=Object(i.a)(a,2),l=c[0],s=c[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2);d[0],d[1];return r.a.createElement(m.a,{key:t.id,backgroundColor:"white",float:"left",width:"80%",height:120,margin:5,elevation:l,onMouseOver:function(){s(3)},onMouseLeave:function(){s(1)},cursor:"pointer"},r.a.createElement(o.a,{style:{display:"flex",boxSizing:"border-box",flexDirection:"column",padding:"10px"}},r.a.createElement("div",{style:{float:"left",marginBottom:"5px"}},r.a.createElement(f.a,{color:"default",fontSize:20},"Id: "),r.a.createElement(f.a,{color:"secondary",fontWeight:400,fontSize:25},t.id)),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",marginBottom:"5px"}},r.a.createElement("div",null,r.a.createElement(f.a,{color:"default",fontSize:20},"Tracking: "),r.a.createElement(f.a,{color:"secondary",fontWeight:400,fontSize:20},t.title.toUpperCase())),r.a.createElement("div",null,r.a.createElement(f.a,{color:"default",fontSize:20},"Total items tracked: "),r.a.createElement(f.a,{color:"secondary",fontWeight:400,fontSize:20},t.items.length))),r.a.createElement("div",null,r.a.createElement(o.a,null,r.a.createElement(f.a,{fontSize:20},"Lowest Priced Item is  "),r.a.createElement(f.a,Object(B.a)({color:"secondary",fontWeight:500,fontSize:25},"color","#47B881")," ",W(t.items).currency," ",W(t.items).price),r.a.createElement(f.a,{color:"secondary",fontWeight:500,fontSize:25},"/"),r.a.createElement(f.a,Object(B.a)({color:"secondary",fontWeight:500,fontSize:25},"color","#EC4C47"),t.currency," ",t.price)),r.a.createElement(o.a,{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"}}))))}function L(e){var t=e.refresh,a=Object(n.useState)([]),c=Object(i.a)(a,2),l=c[0],s=c[1];return Object(n.useEffect)((function(){fetch("/api/trackings").then((function(e){return e.json()})).then(s)}),[t]),r.a.createElement(o.a,{clearfix:!0},l.map((function(e){return r.a.createElement(R,{tracking:e})})))}var A=a(184),P=a(192);function H(){var e=[r.a.createElement(T,null),r.a.createElement(L,{refresh:c})],t=Object(n.useState)(0),a=Object(i.a)(t,2),c=a[0],l=a[1];return r.a.createElement(o.a,{display:"flex",height:240},r.a.createElement(A.a,{marginBottom:16,flexBasis:240,marginRight:24},["Search","Trackings"].map((function(e,t){return r.a.createElement(P.a,{key:e,id:e,onSelect:function(){return l(t)},isSelected:t===c,"aria-controls":"panel-".concat(e)},e)}))),r.a.createElement(o.a,{padding:16,background:"tint1",flex:"1"},e.map((function(e,t){return r.a.createElement(o.a,{key:t,id:"panel-".concat(t),role:"tabpanel","aria-labelledby":t,"aria-hidden":t!==c,display:t===c?"block":"none"},e)}))))}var M=a(188);a(17);function N(){return r.a.createElement(o.a,null,r.a.createElement(S.a,{style:{width:"100%",height:"120px"},background:"tint1",size:900},"Header"),r.a.createElement(M.a.Divider,null))}var J=function(){return r.a.createElement(o.a,{clearfix:!0,className:"App",background:"tint2"},r.a.createElement("header",{className:"App-header"}),r.a.createElement(N,null),r.a.createElement(o.a,{style:{width:"100%",margin:"auto"}},r.a.createElement(o.a,{style:{width:"90%",float:"left"}},r.a.createElement(H,null)),r.a.createElement(o.a,{style:{width:"10%",float:"left"}})),r.a.createElement(o.a,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=a(43);l.a.render(r.a.createElement(U.a,null,r.a.createElement(r.a.StrictMode,null,r.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},85:function(e,t,a){e.exports=a(165)},90:function(e,t,a){}},[[85,1,2]]]);
//# sourceMappingURL=main.6d47483c.chunk.js.map